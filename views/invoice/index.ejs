<!DOCTYPE html>
<html lang="en">
<!-- Head -->
<%- include('../partials/head.ejs') %>  
<head>
    <link rel="stylesheet" href="/styles/index.css">
    <script src="/scripts/index.js" defer></script>
</head>

<body>
    <!-- Navbar -->
    <%- include('../partials/nav.ejs') %>

    <main>
        <header>
            <div class="left">
                <h1>Invoices</h1>
                <p class="g"><%= invoices.length %> invoices</p>
            </div>
            <div class="right">
                <div id="filter" class="filter">
                    <span>Filter <span class="h">by status</span><img src="/svgs/arrow-down.svg" alt="arrow down"></span>
                    <div id="list" class="list">
                        <button>Draft</button>
                        <button>Pending</button>
                        <button>Paid</button>
                    </div>
                </div>
                <a href="/new-invoice" class="new-btn">
                    <button></button>
                     <p>New <span class="h">invoice</span></p>
                </a>
            </div>
        </header>

        <section class="invoices">
            <% if(invoices.length > 0){ %>
                <%invoices.forEach(invoice=> {%>
                    <a href='/invoice/<%= invoice._id %>' class="invoice desktop">
                        <div class="inv-num"><span class="hash">#</span>ABCDEF1</div>

                        <div class="g date">Due <%= invoice.invoice.date %></div>

                        <div class="g name"><%= invoice.client.name %> </div>

                        <div class="total">$<%= invoice.items.price*invoice.items.qty %> </div>

                        <div class="end">
                            <div class="status <%= invoice.status %>"><span></span><%= invoice.status %> </div>
                            <img class="arrow" src="/svgs/arrow-right.svg" alt="right arrow">
                        </div>
                    </a>
                    <a href='/invoice/<%= invoice._id %>' class="invoice mobile">
                        <div>
                            <div class="inv-num"><span class="hash">#</span>ABCDEF1</div>

                            <div class="g name">
                                <%= invoice.client.name %>
                            </div>
                        </div>
                        <div>
                            <div>
                                <div class="g date">Due <%= invoice.invoice.date %>
                                </div>
                            
                                <div class="total">$<%= invoice.items.price*invoice.items.qty %>
                                </div>
                            </div>

                            <div class="status <%= invoice.status %>"><span></span>
                                <%= invoice.status %>
                            </div>
                        </div>
                    
                    </a>
            <% })} else{ %>
                    <p>No invoice yet</p>
            <% } %>
        </section>
    </main>
</body>
</html>